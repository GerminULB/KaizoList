<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Countdown with Mystery Hours</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: black;
    color: #00ffdd;
    font-family: 'manaspace', monospace;
  }

  #timer {
    font-size: 72px;
    letter-spacing: 12px;
  }

  .digit, .sep { display:inline-block; width:auto; text-align:center; }

  #forumLink {
    margin-top: 40px;
    font-size: 32px;
    color: #00ffdd;
    text-decoration: underline;
    cursor: pointer;
    display: none;
  }
</style>
</head>
<body>
<audio id="tickSound" src="sound/tick.wav" preload="auto"></audio>

<div id="timer">
  <span class="digit">0</span><span class="digit">0</span><span class="sep">:</span>
  <span class="digit">0</span><span class="digit">0</span><span class="sep">:</span>
  <span class="digit">0</span><span class="digit">0</span>
</div>

<a id="forumLink" href="https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform" target="_blank">
  Open the Forum
</a>

<script>
const timerDigits = document.querySelectorAll(".digit");
const forumLink = document.getElementById('forumLink');

const targetTime = new Date('2025-10-06T18:00:00Z').getTime()

function updateTimer() {
  const now = Date.now();
  let diff = Math.max(0, targetTime - now);

  // Calculate hours, minutes, seconds
  let totalHours = Math.floor(diff / (1000*60*60));
  diff %= (1000*60*60);
  const minutes = String(Math.floor(diff / (1000*60))).padStart(2,'0');
  diff %= (1000*60);
  const seconds = String(Math.floor(diff / 1000)).padStart(2,'0');

  // Hour twist: ??? if 100 or more
  let hoursDisplay;
  if(totalHours < 100){
    hoursDisplay = String(totalHours).padStart(2,'0');
  } else {
    // jitter digits 0-9 randomly
    hoursDisplay = '' + Math.floor(Math.random()*10) + Math.floor(Math.random()*10);
  }

  // Build string for display (HH:MM:SS)
  const timeStr = hoursDisplay + minutes + seconds;
  timeStr.split("").forEach((num,i)=>{
    if(timerDigits[i]) timerDigits[i].textContent = num;
  });

  // Show forum link when countdown finishes
  if(totalHours <= 0 && minutes === "00" && seconds === "00"){
    forumLink.style.display = 'block';
  }
}


let lastSecond = null;

function updateTimer() {
  const now = Date.now();
  let diff = Math.max(0, targetTime - now);

  let hoursTotal = Math.floor(diff / (1000*60*60));
  let hoursDisplay = hoursTotal >= 100 ? '???' : String(hoursTotal).padStart(2,'0');

  diff %= (1000*60*60);
  const minutes = String(Math.floor(diff / (1000*60))).padStart(2,'0');
  diff %= (1000*60);
  const seconds = String(Math.floor(diff / 1000)).padStart(2,'0');

  const timeStr = hoursDisplay + minutes + seconds;
  timerDigits.forEach((d,i)=>{
    if(timerDigits[i]) d.textContent = timeStr[i];
  });

  // Play tick only if second changed
  if(seconds !== lastSecond){
    tickSound.currentTime = 0;
    tickSound.play().catch(e=>console.log("Audio blocked:", e));
    lastSecond = seconds;
  }
}

// Start countdown
updateTimer();
setInterval(updateTimer, 1000);

</script>
</body>
</html>
