<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7N58SZ0J6W"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  // Enable IP anonymization to protect privacy (Why is this not turned on automatically wtf google)
  gtag('config', 'G-7N58SZ0J6W', { 'anonymize_ip': true });
</script>
  
  <link rel="icon" type="image/png" href="images/kaizolistlogo.png" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Kaizo List Hub</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Meta for Discord/Twitter preview -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="The Kaizo List Hub">
  <meta name="twitter:description" content="Welcome to the Kaizo List.">
  <meta name="twitter:image" content="https://germenntia.github.io/KaizoList/images/kaizolistlogo.png">
  <meta property="og:title" content="The Kaizo List Hub" />
  <meta property="og:description" content="Welcome to the Kaizo List." />
  <meta property="og:image" content="images/kaizolistlogo.png" />
  <meta property="og:url" content="https://germenntia.github.io/KaizoList/" />
</head>
<body>
<div class="page-banner"></div>

  
  <div class="container">
    <img src="images/kaizolistlogo_wide.png" alt="Kaizo List Logo" class="logo">
   <div class="index-intro">
  <h1>Welcome to The Kaizo List!</h1>
  <p>Track the hardest Kaizo levels in Ultimate Level Builder, and see it's best players.</p>
<div class="update-announcement">
  <strong>Latest Update (V1.111):</strong> Overall fixed a huge bug + made the website links cleaner. Also a... 
  <a href="/KaizoList/THE_COUNTDOWN/" style="color: red; text-decoration: underline;">countdown</a> appeared..
</div>
<div id="recent-changes-container" class="scrollable" style="margin-top:20px; text-align:left;">
  <h2>Recent Changes</h2>
  <div id="recent-changes"></div>
</div>
</div>
    <p class="hub-intro">Where would you like to go?</p>

    <!-- Hub navigation buttons -->
    <nav>
    <div class="hub-links">
      <a href="/KaizoList/MainList/" class="hub-button">Main List</a>
      <a href="/KaizoList/ChallengeList/" class="hub-button">Challenge List</a>
      <a href="/KaizoList/PlayerList/" class="hub-button">Player Rankings</a>
    </div>
    </nav>
    <!-- Rules / Info -->
    <div class="hub-info">
      <h2>Rules & Community</h2>
      <ul>
        <li>No Secret Ways except intended or verification purposes (video proof required)</li>
        <li>No external applications (auto-clickers, macros, etc.)</li>
        <li>Verification usually requires video proof</li>
        <li>No cheating</li>
        <li>Challenges: No checkpoints, 1HP, size 1x1–2x1, no sub-world</li>
          </ul>
          <p>Join the <a href="https://discord.gg/n9MEzwNXGs" target="_blank">Berneyvonbean Discord server</a>!</p>
          <p>Join our <a href="https://discord.gg/3un6nh8G9w" target="_blank">Kaizo List Discord server</a> to submit your own records!</p>
          </div>
  </div>

<script>
const patterns = [
  'images/pattern/pattern0.png',
  'images/pattern/pattern1.png',
  'images/pattern/pattern2.png',
  'images/pattern/pattern3.png',
  'images/pattern/pattern4.png',
  'images/pattern/pattern5.png',
  'images/pattern/pattern6.png',
  'images/pattern/pattern7.png',
  'images/pattern/pattern8.png',
  'images/pattern/pattern9.png',
  'images/pattern/pattern10.png',
  'images/pattern/pattern11.png',
  'images/pattern/pattern12.png',
];

document.querySelectorAll('.hub-button').forEach(btn => {
  const idx = Math.floor(Math.random() * patterns.length);
  btn.style.backgroundImage = `url('${patterns[idx]}')`;
  btn.style.backgroundRepeat = 'repeat';
  btn.style.backgroundSize = '32px 32px'; 
  btn.style.color = '#ffffff';        
  btn.style.border = '2px solid black';
  btn.style.imageRendering = 'pixelated';
  btn.style.textShadow = '1px 1px 0 #000';
});
</script>

  <footer class="site-footer">
  <p>The Kaizo List &copy; 2025 — Version 1.1111</p>
  <p>
    Game & All assets belong to 
    <a href="https://berneyvonbean.itch.io/" target="_blank">Berneyvonbean (Itch.io)</a> |
    <a href="https://www.youtube.com/@Berneyvonbean" target="_blank">(YouTube)</a>
  </p>
</footer>

  <button id="scroll-top" title="Go to top">⬆️</button>


<script>
(async () => {
  const historyFiles = [
    "history/2025-09-11.json",
    "history/2025-09-20.json",
    "history/2025-09-21.json",
    "history/2025-09-28.json",
  ];

  const recentChangesEl = document.getElementById('recent-changes');
  if (!recentChangesEl) return;

  let previousSnapshot = null;
  let initialMessage = null;

  // Load snapshots
  for (const file of historyFiles) {
    try {
      const res = await fetch(file);
      if (!res.ok) continue;

      const snapshot = await res.json();
      snapshot.sort((a,b)=>b.klp-a.klp);

      snapshot.forEach((lvl, idx) => lvl.rank = idx+1);

      snapshot.forEach(lvl => {
        if (!lvl.name) return;

        if (!previousSnapshot) {
          if (lvl.name) initialMessage = `On ${file.match(/\d{4}-\d{2}-\d{2}/)[0]}, "${lvl.name}" was initially added at rank ${lvl.rank} with ${lvl.klp} KLP.`;
        }
      });

      previousSnapshot = snapshot.map(lvl => ({name: lvl.name, rank: lvl.rank, klp: lvl.klp}));
    } catch (err) {
      console.warn("Could not load snapshot", file, err);
    }
  }

  // Load latest levels.json
  try {
    const res = await fetch("levels.json");
    if (!res.ok) throw new Error("Cannot load levels.json");
    const latest = await res.json();
    latest.sort((a,b)=>b.klp-a.klp);
    latest.forEach((lvl, idx)=>lvl.rank = idx+1);

    const prevMap = {};
    previousSnapshot.forEach(lvl => prevMap[lvl.name] = lvl);

    let changesFound = false;

    latest.forEach(lvl => {
      const prev = prevMap[lvl.name];
      if (!prev) return; 
      const rankChange = lvl.rank - prev.rank;
      const klpChange = lvl.klp - prev.klp;
      if(rankChange===0 && klpChange===0) return; // skip no-change levels

      const div = document.createElement("div");
      div.style.marginBottom = "4px";

      let parts = [];
      if(rankChange!==0) parts.push(rankChange>0 ? `${rankChange} spots down` : `${-rankChange} spots up`);
      if (klpChange !== 0) parts.push(`${klpChange > 0 ? '+' : ''}${klpChange} KLP`);

      div.innerText = `${lvl.name}: ${parts.join(", ")}`;

      // Divider
      const hr = document.createElement("hr");
      recentChangesEl.appendChild(div);
      recentChangesEl.appendChild(hr);

      changesFound = true;
    });

    // Initial add message at bottom
    if(initialMessage){
      const div = document.createElement("div");
      div.style.marginTop="8px";
      div.style.fontWeight="bold";
      div.innerText = initialMessage;
      recentChangesEl.appendChild(div);
    }

    if(!changesFound && !initialMessage){
      recentChangesEl.innerText = "No recent changes.";
    }

  } catch(err){
    console.error("Error loading latest levels.json", err);
    recentChangesEl.innerText = "Error loading recent changes.";
  }

})();
</script>

</body>
</html>
 
